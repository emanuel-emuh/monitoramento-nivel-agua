<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>AquaMonitor – Admin</title>

  <!-- estilos -->
  <link rel="stylesheet" href="admin.css?v=7"/>

  <!-- fontes (opcional) -->
  <link rel="preconnect" href="https://fonts.googleapis.com"/>
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin/>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet"/>
</head>
<body>
  <!-- navbar -->
  <nav class="navbar">
    <div class="logo">
      <span class="logo-icon">AM</span>
      <h1>Admin</h1>
    </div>
    <a href="#" class="logout-button">Sair</a>
  </nav>

  <main class="container">
    <header class="page-header">
      <h2>Painel do Administrador</h2>
      <p>Ajuste de limites, controle de coleta e observabilidade.</p>
    </header>

    <!-- linha 1: cartões de status rápido -->
    <section class="grid">
      <div class="card">
        <h3>Nível – Caixa Principal</h3>
        <div class="tanks">
          <div class="tank">
            <div id="admin-water-main" class="water" style="height:0%"></div>
          </div>
          <div class="tank-info">
            <span id="admin-level-percent-main" class="badge">--</span>
            <small>Percentual</small>
          </div>
        </div>
        <p class="big" id="admin-level-card">--%</p>
      </div>

      <div class="card">
        <h3>Nível – Reservatório</h3>
        <div class="tanks">
          <div class="tank">
            <div id="admin-water-res" class="water" style="height:0%"></div>
          </div>
          <div class="tank-info">
            <span id="admin-level-percent-res" class="badge">--</span>
            <small>Percentual</small>
          </div>
        </div>
        <p class="big" id="admin-res-level-card">--%</p>
      </div>

      <div class="card">
        <h3>Status da Bomba</h3>
        <p class="big" id="admin-pump-status-card">--</p>
        <h3>Coleta</h3>
        <p class="big" id="admin-collection-status-card">--</p>
      </div>

      <div class="card">
        <h3>Conexão do Dispositivo</h3>
        <p class="big"><span id="admin-connection-status">--</span></p>
        <p id="admin-last-seen" class="muted">Visto: --</p>
      </div>
    </section>

    <!-- linha 2: configurações -->
    <section class="grid">
      <div class="card">
        <h3>Limites de Operação</h3>
        <div class="form-row">
          <label>Limite Inferior (%)</label>
          <input id="low-limit-input" type="number" min="0" max="100" step="1" value="50"/>
        </div>
        <div class="form-row">
          <label>Limite Superior (%)</label>
          <input id="high-limit-input" type="number" min="0" max="100" step="1" value="95"/>
        </div>
        <div class="actions">
          <button id="save-settings-button" class="btn btn-primary">Salvar</button>
          <span id="settings-feedback" class="muted"></span>
        </div>
      </div>

      <div class="card">
        <h3>Coleta e Dispositivo</h3>
        <div class="actions">
          <button id="toggle-collection-button" class="btn btn-action" disabled>Aguard...</button>
          <button id="restart-esp-button" class="btn btn-warning">Reiniciar ESP</button>
        </div>

        <h3 style="margin-top:16px;">Histórico</h3>
        <div class="actions">
          <button id="clear-history-button" class="btn btn-danger">Limpar Histórico</button>
        </div>

        <h3 style="margin-top:16px;">Logs</h3>
        <div class="actions">
          <button id="clear-logs-button" class="btn btn-danger">Limpar Logs</button>
        </div>
      </div>

      <div class="card card-logs">
        <h3>Eventos (últimos)</h3>
        <ul id="log-entries" class="logs">
          <li>Carregando...</li>
        </ul>
      </div>
    </section>
  </main>

  <footer class="footer">
    <small>&copy; 2025 AquaMonitor</small>
  </footer>

  <!-- Firebase compat SDKs -->
  <script defer src="https://www.gstatic.com/firebasejs/9.6.1/firebase-app-compat.js"></script>
  <script defer src="https://www.gstatic.com/firebasejs/9.6.1/firebase-auth-compat.js"></script>
  <script defer src="https://www.gstatic.com/firebasejs/9.6.1/firebase-database-compat.js"></script>

  <!-- app -->
  <script defer src="admin.js?v=11"></script>
</body>
</html>
