<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>AquaMonitor - Dashboard</title>

  <!-- Estilos -->
  <link rel="stylesheet" href="dashboard.css?v=7"/>

  <!-- (Opcional) Fonte bonita -->
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin/>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet"/>
</head>
<body>
  <!-- Navbar -->
  <nav class="navbar">
    <div class="logo">
      <span class="logo-icon">AM</span>
      <h1>AquaMonitor</h1>
    </div>
    <a href="#" class="logout-button">Sair</a>
  </nav>

  <main class="container">
    <!-- CabeÃ§alho -->
    <header style="text-align:center; margin: 18px 0 10px;">
      <h2>Monitoramento de NÃ­vel</h2>
      <p>Consumo, status da bomba e controle em tempo real.</p>
    </header>

    <!-- ====== Cards de NÃ­vel ====== -->
    <section aria-label="NÃ­veis">
      <div class="card">
        <div class="card-icon icon-green">â¬†</div>
        <h3>Caixa Principal</h3>
        <p id="main-level-value" class="value">--%</p>
        <p id="main-level-liters" class="subvalue">-- L</p>

        <!-- Barra horizontal (seu CSS usa .level-fill) -->
        <div class="level-bar">
          <div id="level-fill-main" class="level-fill" style="width:0%"></div>
        </div>
        <p>Percentual: <b id="level-percentage-main">--%</b></p>

        <!-- Visual do tanque (vertical) -->
        <div class="tank-visual">
          <div class="tank">
            <div id="client-water-main" class="water" style="height:0%"></div>
          </div>
          <div class="tank-label">
            <span>Principal</span> (<span id="client-level-percent-main">--</span>%)
          </div>
        </div>
      </div>

      <div class="card">
        <div class="card-icon icon-green">â¬‡</div>
        <h3>ReservatÃ³rio</h3>
        <p id="res-level-value" class="value">--%</p>
        <p id="res-level-liters" class="subvalue">-- L</p>

        <div class="level-bar">
          <div id="level-fill-res" class="level-fill" style="width:0%"></div>
        </div>
        <p>Percentual: <b id="level-percentage-res">--%</b></p>

        <div class="tank-visual">
          <div class="tank">
            <div id="client-water-res" class="water" style="height:0%"></div>
          </div>
          <div class="tank-label">
            <span>ReservatÃ³rio</span> (<span id="client-level-percent-res">--</span>%)
          </div>
        </div>
      </div>
    </section>

    <!-- ====== Status e Controles ====== -->
    <section aria-label="Status e Controles">
      <div class="card">
        <div class="card-icon" id="pump-status-icon">âš™</div>
        <h3>Status da Bomba</h3>
        <p class="value" id="pump-status-value">--</p>
        <p class="subvalue" id="pump-status-text">Aguardando...</p>
      </div>

      <div class="card">
        <div class="card-icon" id="mode-icon">ðŸ› </div>
        <h3>Modo de OperaÃ§Ã£o</h3>
        <p class="value" id="mode-value">--</p>
        <p class="subvalue" id="mode-text">Aguardando...</p>
      </div>

      <div class="card settings-card">
        <h3>Controle da Bomba</h3>

        <!-- Switch AutomÃ¡tico -->
        <div class="control-row">
          <label for="auto-mode-switch" style="font-weight:600;">Modo AutomÃ¡tico</label>
          <input type="checkbox" id="auto-mode-switch" />
        </div>

        <!-- BotÃ£o Manual -->
        <div class="control-row">
          <button id="motor-button" class="btn-motor-off">Ligar Bomba</button>
        </div>

        <!-- Indicador textual atual -->
        <p>Status atual: <b id="motor-status">--</b></p>
      </div>

      <!-- ===== SeÃ§Ã£o: Modo EconÃ´mico (FÃ©rias) ===== -->
      <div class="card settings-card" id="sec-modo-economico">
        <h3>Modo EconÃ´mico (FÃ©rias)</h3>
        <p class="settings-hint">
          Reduz o consumo: aplica limites <b>15%</b> (liga) e <b>50%</b> (desliga) enquanto estiver ativo.
        </p>

        <div class="control-row">
          <button id="btn-ferias" class="normal" type="button">Ativar Modo FÃ©rias</button>
        </div>

        <p id="ferias-info" class="settings-info">
          <b>Modo FÃ©rias:</b> Usa limites de 15% a 50% para economizar.
        </p>
      </div>
    </section>

    <!-- ====== Consumo & GrÃ¡fico ====== -->
    <section aria-label="Consumo">
      <div class="card">
        <div class="card-icon">ðŸ“ˆ</div>
        <h3>Consumo Estimado</h3>
        <p id="consumption-value" class="value">-- L/dia</p>
        <p id="consumption-text" class="subvalue">Calculando...</p>
        <div style="height:260px; margin-top: 12px;">
          <canvas id="levelChart"></canvas>
        </div>
      </div>
    </section>
  </main>

  <footer style="text-align:center; padding: 24px 0; color:#777;">
    <small>&copy; 2025 AquaMonitor</small>
  </footer>

  <!-- SDK Firebase (compat) -->
  <script defer src="https://www.gstatic.com/firebasejs/9.6.1/firebase-app-compat.js"></script>
  <script defer src="https://www.gstatic.com/firebasejs/9.6.1/firebase-auth-compat.js"></script>
  <script defer src="https://www.gstatic.com/firebasejs/9.6.1/firebase-database-compat.js"></script>

  <!-- (Opcional) Chart.js para o grÃ¡fico -->
  <script defer src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js"></script>

  <!-- Seu JS principal (depois dos SDKs) -->
  <script defer src="dashboard.js?v=8"></script>
</body>
</html>
